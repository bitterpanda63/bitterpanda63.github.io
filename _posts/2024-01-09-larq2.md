---
layout: page
title: Reverse-Engineering the Lar
order: 2
---

Hiya! I recently bought the LARQ PureVis 2, which is a smart waterbottle, to track my water intake.
I've noticed the app is not super reliant so I've started a new quest, figuring out how it works (and fixing it).

## My first guess
So I've had the bottle for a while now, here is my first guess at how it works :

To track water intake the bottle has a sonar sensor, which only triggers after a gyroscope confirms that the bottle is upright and standing still.
It then checks the difference between two sonar readings so it knows the length `l` which somebody drank. To get the ml, you just have to determine the volume.
So that's as easy as $V = 2* \pi * r^2 * l$, where `r` is the circumference of the bottle. 

The filter is just a passive filter which does not really have a lot of technically interesting details afaik. 
The cleaning is done using a UV-light : This goes off every **2h** to clean the bottle but you can also trigger it yourself if your water source is not healthy.

When using the app I discovered that it warned me to turn on Bluetooth so I'm guessing the bottle uses either standard Bluetooth or BLE.

## What's next
A good next step in my effort to reverse-engineer the bottle is to find the **patent**, that way I can confirm a lot of my findings, figure out the actual circumference, the technology behind it.
And I can maybe even figure out which wireless technology they are using.

Using JUSTIA and Google Patents I found the following patents :
- [Device for UV-LED liquid monitoring and treatment](https://patents.google.com/patent/US10959443B2/) : Talks about UV-B and UV-C light for cleaning, a way of transmitting data and using pressure sensors to measure the volume of the water.
- [Filtering container with time-based capacitive flow monitoring](https://patents.google.com/patent/US10969262B1) : This references a capacitive strip with discrete points along the bottle to measure where the water level is and it also references Bluetooth as a communication technology. Here in the sketches we also begin to see the bottle?
